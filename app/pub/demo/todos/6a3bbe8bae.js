/*
 * @packet demo.todos.todos;
 * @template demo.todos.template.temp;
 * @css demo.todos.style.todostyle; 
 * @css demo.todos.style.font;
 */
Module({name:"todos",extend:"view",autodom:!0,className:"todos",template:module.getTemplate("@temp","todos"),init:function(){this._todos=this.getStorage("todos")||{task:[],totalleft:0,complete:!1,active:!1,all:!0,ischeckall:!1},this.render(this._todos)},bind_checkall:function(){if(this._todos.ischeckall){for(var t=0;t<this._todos.task.length;t++)this._todos.task[t].checked=!1;this._todos.ischeckall=!1,this.update()}else{for(var t=0;t<this._todos.task.length;t++)this._todos.task[t].checked=!0;this._todos.ischeckall=!0,this.update()}},bind_check:function(t,o){var s=t.group().cache();s.checked?s.checked=!1:s.checked=!0,this.update(),o.stopPropagation()},bind_remove:function(t){var o=t.group().cache(),s=this._todos.task.indexOf(o);this._todos.task.splice(s,1),this.update()},bind_input:function(t,o){if(13===o.keyCode){var s=t.val();s&&(this._todos.task.push({checked:!1,desc:s,id:(new Date).getTime()}),this.update(),t.val(""))}},bind_all:function(){this._todos.all=!0,this._todos.complete=!1,this._todos.active=!1,this.update()},bind_active:function(){this._todos.active=!0,this._todos.complete=!1,this._todos.all=!1,this.update()},bind_complete:function(){this._todos.active=!1,this._todos.complete=!0,this._todos.all=!1,this.update()},bind_clear:function(){for(var t=[],o=0;o<this._todos.task.length;o++)this._todos.task[o].checked||t.push(this._todos.task[o]);this._todos.task=t,this.update()},update:function(){for(var t=0,o=0;o<this._todos.task.length;o++)this._todos.task[o].checked===!1&&(t+=1);0!==t&&(this._todos.ischeckall=!1),this._todos.totalleft=t,this.setStorage("todos",this._todos),this.superClass("update")}}),Module({name:"todos2",extend:"@.todos",template:module.getTemplate("@temp","todos2")}),Option({name:"todosoption",option:{type:"@.todos",type2:"@.todos2"}});