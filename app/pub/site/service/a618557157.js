/**
 * @packet site.service.base;
 */
Module({name:"scrollservice",extend:"publicservice",init:function(){var t=this;this.start(),$(window).bind("scroll",function(e){t.trigger("scroll",{scroll:$("body").scrollTop()})})}}),Module({name:"listservice",extend:"privateservice",option:{url:"",add:"",remove:"",edit:"",detail:"",pagesize:10},init:function(){this.data=[],this._current=0,this._isend=!1,this.start()},onconnect:function(){this.gotoPage(0).then(function(t){return this.trigger("firstpage",{}),t})},service_gotopage:function(t){return this.gotoPage(t)},gotoPage:function(t){if(!this._isend){var e=t*this.option.pagesize;return this._current=t,this.stop(),this.postRequest(this.option.url,{from:e,size:this.option.pagesize}).scope(this).then(function(t){return this.start(),this.data=this.data.concat(t),this.trigger(),t.length<this.option.pagesize&&(this._isend=!0),t})}},nextPage:function(){var t=this._current+1;this.gotoPage(t)},prevPage:function(){var t=this._current-1;this.gotoPage(t)},refresh:function(){return this.gotoPage(this._current)},service_page:function(t){this.gotoPage(t)},service_next:function(){this.nextPage()},service_prev:function(){this.prevPage()},service_removeitem:function(t){return this.postRequest(this.option.remove,t).scope(this).then(function(){return this.refresh()})},service_additem:function(t){return this.postRequest(this.option.add,t)},service_edititem:function(t){return this.postRequest(this.option.edit,t)}}),Module({name:"translate",extend:"privateservice",init:function(){this.start()},service_translate:function(t){var e=this;return this.stop(),$.ajax({url:sitePath+"/api/translate",data:{q:t},method:"get",dataType:"json"}).then(function(t){return console.log(t),e.start(),e.trigger(t),t})}});